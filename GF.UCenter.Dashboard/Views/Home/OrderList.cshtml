
@{
    ViewBag.Title = "订单列表";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div>
    <div ng-controller="ordersController">
        @if (ViewBag.AccountName != null)
        {
            <h2 class="page-header">订单列表 <small>-用户:@ViewBag.AccountName</small> </h2>
        }
        else
        {
            <h2 class="page-header">订单列表</h2>
        }

        <div class="row" ng-init="params.accountId='@ViewBag.AccountId'">
            <div class="col-sm-offset-8 col-sm-4">
                <form ng-submit="fetch()">
                    <div class="input-group">
                        <input type="text" class="form-control" ng-model="params.keyword" placeholder="Search" name="srch-term" id="srch-term">
                        <div class="input-group-btn">
                            <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <table class="table table-bordered table-striped table-condensed" ng-open="">
            <thead>
                <tr>
                    <th>订单号</th>
                    <th>账号</th>
                    <th>App Id</th>
                    <th>状态</th>
                    <th>创建时间</th>
                    <th>完成时间</th>
                    <th>详情</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="row in raws">
                    <td>{{row.OrderId}}</td>
                    <td>{{row.AccountName}}</td>
                    <td>{{row.AppId}}</td>
                    <td>{{row.OrderStatus|enums:'orderStatus'}}</td>
                    <td>{{row.CreatedTime | date:'yyyy/MM/dd HH:mm'}}</td>
                    <td>{{row.CompletedTime|date:'yyyy/MM/dd HH:mm'}}</td>
                    <td><a href="/home/singleorder?id={{row.OrderId}}">详情</a></td>
                </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="col-sm-8">
                <uib-pagination total-items="data.Total"
                                items-per-page="data.PageSize"
                                ng-model="page"
                                max-size="maxShowPages"
                                ng-change="onPageChange()"
                                class="pagination"
                                boundary-link-numbers="true"
                                previous-text="上一页"
                                next-text="下一页"
                                first-text="第一页"
                                lang-text="最后一页"
                                rotate="false"></uib-pagination>
            </div>
            <div class="col-sm-4 text-right">
                <ul class="pagination">
                    <li class="disabled"><a href="#">页长</a></li>
                    <li ng-repeat="size in pageSizeList" ng-class="{active:size==pageSize}">
                        <a href="#" ng-click="onPageSizeChange(size)">{{size}}</a>
                    </li>
                </ul>
            </div>
        </div>
        <div ng-init="fetch()"></div>
    </div>
</div>
